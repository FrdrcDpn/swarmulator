

fileID1 = fopen('xyTrajectory1.txt','w');
fileID2 = fopen('xyTrajectory2.txt','w');
fileID3 = fopen('xyTrajectory3.txt','w');
fileID4 = fopen('xyTrajectory4.txt','w');
fileID5 = fopen('xyTrajectory5.txt','w');

               % Time, Waypoint, Orientation
trajectoryInfo1 = [0,   -2.45,-7.45,0,    0,0,0; ... % Initial position
                  0.3, -2.45,-7.45,0,  0,0,0; ...
                    
                  2.2, -2.45,-7.45,0,  0,0,0; ...
                  2.5,   -2.5,-7.5,0,    45,0,0; ...
                  2.8, -2.5,-7.45,0  90,0,0; ...
 
                  % 1, -1.5,-0.1,0,  0,0,0; ...
                  8.75,   -2.5,0,0,    45,0,0; ...
                   %2.1, -1.5,0.1,0  90,0,0; ...
                  
                  14.7, -2.5,7.45,0,  90,0,0; ...
                  15,   -2.5,7.5,0,    135,0,0; ...
                  15.3, -2.45,7.5,0,  180,0,0; ...
 
                   %3.9, -0.1,1.5,0,  90,0,0; ...
                  21.25,   0,7.5,0,    135,0,0; ...
                   %4.1, 0.1,1.5,0,  180,0,0; ...
                  
                  27.2, 2.45,7.5,0,  180,0,0; ...
                  27.5,   2.5,7.5,0,    225,0,0; ...
                  27.8, 2.5,7.45,0,  270,0,0; ...
 
                  % 5.9, 1.5,0.1,0,  180,0,0; ...
                   33.75,   2.5,0,0,    225,0,0; ...
                   %6.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  39.7, 2.5,-7.45,0,  180,0,0; ...
                  40,   2.5,-7.5,0,    225,0,0; ...
                  40.3, 2.45,-7.5,0,  270,0,0; ...
                  
                   %7.9, 0.1,-1.5,0,  180,0,0; ...
                  46.25,   0,-7.5,0,    225,0,0; ...
                   %8.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  52.2, -2.45,-7.5,0,  0,0,0; ...
                  52.5,   -2.5,-7.5,0,    45,0,0; ...
                  52.8, -2.5,-7.45,0  90,0,0; ...
 
                   %9.9, -1.5,-0.1,0,  0,0,0; ...
                   58.75,   -2.5,0,0,    45,0,0; ...
                   %10.1, -1.5,0.1,0  90,0,0; ...
                  
                  64.7, -2.5,7.45,0,  90,0,0; ...
                  65,   -2.5,7.5,0,    135,0,0; ...
                  65.3, -2.45,7.5,0,  180,0,0; ...
 
                   %11, -0.1,1.5,0,  90,0,0; ...
                   71.25,   0,7.5,0,    135,0,0; ...
                   %12.1, 0.1,1.5,0,  180,0,0; ...
                  
                  77.2, 2.45,7.5,0,  180,0,0; ...
                  77.5,   2.5,7.5,0,    225,0,0; ...
                  77.8, 2.5,7.45,0,  270,0,0; ...
 
                   %13.9, 1.5,0.1,0,  180,0,0; ...
                   83.75,   2.5,0,0,    225,0,0; ...
                   %14.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  89.7, 2.5,-7.45,0,  180,0,0; ...
                  90,   2.5,-7.5,0,    225,0,0; ...
                  90.3, 2.45,-7.5,0,  270,0,0; ...
                  
                   %15.9, 0.1,-1.5,0,  180,0,0; ...
                   96.25,   0,-7.5,0,    225,0,0; ...
                   %16.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  102.2, -2.45,-7.5,0,  270,0,0; ...
                  102.5,   -2.5,-7.5,0,    270,0,0]; % Final position

               % Time, Waypoint, Orientation
trajectoryInfo2 = [0,   -2.45,7.45,0,    0,0,0; ... % Initial position
                  0.3, -2.45,7.45,0,  0,0,0; ...
                    
                  2.2, -2.45,7.45,0,  0,0,0; ...
                  2.5,   -2.5,7.5,0,    45,0,0; ...
                  2.8, -2.45,7.5,0  90,0,0; ...
 
                  % 1, -1.5,-0.1,0,  0,0,0; ...
                  8.75,   0,7.5,0,    45,0,0; ...
                   %2.1, -1.5,0.1,0  90,0,0; ...
                  
                  14.7, 2.45,7.45,0,  90,0,0; ...
                  15,   2.5,7.5,0,    135,0,0; ...
                  15.3, 2.5,7.45,0,  180,0,0; ...
 
                   %3.9, -0.1,1.5,0,  90,0,0; ...
                  21.25,   2.5,0,0,    135,0,0; ...
                   %4.1, 0.1,1.5,0,  180,0,0; ...
                  
                  27.2, 2.5,-7.45,0,  180,0,0; ...
                  27.5,   2.5,-7.5,0,    225,0,0; ...
                  27.8, 2.45,-7.5,0,  270,0,0; ...
 
                  % 5.9, 1.5,0.1,0,  180,0,0; ...
                   33.75,   0,-7.5,0,    225,0,0; ...
                   %6.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  39.7, -2.45,-7.5,0,  180,0,0; ...
                  40,   -2.5,-7.5,0,    225,0,0; ...
                  40.3, -2.5,-7.45,0,  270,0,0; ...
                  
                   %7.9, 0.1,-1.5,0,  180,0,0; ...
                  46.25,   -2.5,0,0,    225,0,0; ...
                   %8.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  52.2, -2.5,7.45,0,  0,0,0; ...
                  52.5,   -2.5,7.5,0,    45,0,0; ...
                  52.8, -2.45,7.5,0  90,0,0; ...
 
                   %9.9, -1.5,-0.1,0,  0,0,0; ...
                   58.75,   0,7.5,0,    45,0,0; ...
                   %10.1, -1.5,0.1,0  90,0,0; ...
                  
                  64.7, 2.45,7.5,0,  90,0,0; ...
                  65,   2.5,7.5,0,    135,0,0; ...
                  65.3, 2.5,7.45,0,  180,0,0; ...
 
                   %11, -0.1,1.5,0,  90,0,0; ...
                   71.25,   2.5,0,0,    135,0,0; ...
                   %12.1, 0.1,1.5,0,  180,0,0; ...
                  
                  77.2, 2.5,-7.45,0,  180,0,0; ...
                  77.5,   2.5,-7.5,0,    225,0,0; ...
                  77.8, 2.45,-7.5,0,  270,0,0; ...
 
                   %13.9, 1.5,0.1,0,  180,0,0; ...
                   83.75,   0,-7.5,0,    225,0,0; ...
                   %14.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  89.7, -2.45,-7.5,0,  180,0,0; ...
                  90,   -2.5,-7.5,0,    225,0,0; ...
                  90.3, -2.5,-7.45,0,  270,0,0; ...
                  
                   %15.9, 0.1,-1.5,0,  180,0,0; ...
                   96.25,   -2.5,0,0,    225,0,0; ...
                   %16.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  102.2, -2.5,7.45,0,  270,0,0; ...
                  102.5,   -2.5,7.5,0,    270,0,0]; % Final position
              
                             % Time, Waypoint, Orientation
trajectoryInfo3 = [0,   2.45,7.45,0,    0,0,0; ... % Initial position
                  0.3, 2.45,7.45,0,  0,0,0; ...
                    
                  2.2, 2.45,7.45,0,  0,0,0; ...
                  2.5,   2.5,7.5,0,    45,0,0; ...
                  2.8, 2.5,7.45,0  90,0,0; ...
 
                  % 1, -1.5,-0.1,0,  0,0,0; ...
                  8.75,   2.5,0,0,    45,0,0; ...
                   %2.1, -1.5,0.1,0  90,0,0; ...
                  
                  14.7, 2.5,-7.45,0,  90,0,0; ...
                  15,   2.5,-7.5,0,    135,0,0; ...
                  15.3, 2.45,-7.5,0,  180,0,0; ...
 
                   %3.9, -0.1,1.5,0,  90,0,0; ...
                  21.25,   0,-7.5,0,    135,0,0; ...
                   %4.1, 0.1,1.5,0,  180,0,0; ...
                  
                  27.2, -2.45,-7.5,0,  180,0,0; ...
                  27.5,   -2.5,-7.5,0,    225,0,0; ...
                  27.8, -2.5,-7.45,0,  270,0,0; ...
 
                  % 5.9, 1.5,0.1,0,  180,0,0; ...
                   33.75,   -2.5,0,0,    225,0,0; ...
                   %6.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  39.7, -2.5,7.45,0,  180,0,0; ...
                  40,   -2.5,7.5,0,    225,0,0; ...
                  40.3, -2.45,7.5,0,  270,0,0; ...
                  
                   %7.9, 0.1,-1.5,0,  180,0,0; ...
                  46.25,   0,7.5,0,    225,0,0; ...
                   %8.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  52.2, 2.45,7.5,0,  0,0,0; ...
                  52.5,   2.5,7.5,0,    45,0,0; ...
                  52.8, 2.5,7.45,0  90,0,0; ...
 
                   %9.9, -1.5,-0.1,0,  0,0,0; ...
                   58.75,   2.5,0,0,    45,0,0; ...
                   %10.1, -1.5,0.1,0  90,0,0; ...
                  
                  64.7, 2.5,-7.45,0,  90,0,0; ...
                  65,   2.5,-7.5,0,    135,0,0; ...
                  65.3, 2.45,-7.5,0,  180,0,0; ...
 
                   %11, -0.1,1.5,0,  90,0,0; ...
                   71.25,   0,-7.5,0,    135,0,0; ...
                   %12.1, 0.1,1.5,0,  180,0,0; ...
                  
                  77.2, -2.45,-7.5,0,  180,0,0; ...
                  77.5,   -2.5,-7.5,0,    225,0,0; ...
                  77.8, -2.5,-7.45,0,  270,0,0; ...
 
                   %13.9, 1.5,0.1,0,  180,0,0; ...
                   83.75,   -2.5,0,0,    225,0,0; ...
                   %14.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  89.7, -2.5,7.45,0,  180,0,0; ...
                  90,   -2.5,7.5,0,    225,0,0; ...
                  90.3, -2.45,7.5,0,  270,0,0; ...
                  
                   %15.9, 0.1,-1.5,0,  180,0,0; ...
                   96.25,   0,7.5,0,    225,0,0; ...
                   %16.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  102.2, 2.45,7.5,0,  270,0,0; ...
                  102.5,   2.5,7.5,0,    270,0,0]; % Final position
              
               % Time, Waypoint, Orientation
trajectoryInfo4 = [0,   2.45,-7.45,0,    0,0,0; ... % Initial position
                  0.3, 2.45,-7.45,0,  0,0,0; ...
                    
                  2.2, 2.45,-7.45,0,  0,0,0; ...
                  2.5,   2.5,-7.5,0,    45,0,0; ...
                  2.8, 2.45,-7.5,0  90,0,0; ...
 
                  % 1, -1.5,-0.1,0,  0,0,0; ...
                  8.75,   0,-7.5,0,    45,0,0; ...
                   %2.1, -1.5,0.1,0  90,0,0; ...
                  
                  14.7, -2.45,-7.5,0,  90,0,0; ...
                  15,   -2.5,-7.5,0,    135,0,0; ...
                  15.3, -2.5,-7.45,0,  180,0,0; ...
 
                   %3.9, -0.1,1.5,0,  90,0,0; ...
                  21.25,   -2.5,0,0,    135,0,0; ...
                   %4.1, 0.1,1.5,0,  180,0,0; ...
                  
                  27.2, -2.5,7.45,0,  180,0,0; ...
                  27.5,   -2.5,7.5,0,    225,0,0; ...
                  27.8, -2.45,7.5,0,  270,0,0; ...
 
                  % 5.9, 1.5,0.1,0,  180,0,0; ...
                   33.75,   0,7.5,0,    225,0,0; ...
                   %6.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  39.7, 2.45,7.5,0,  180,0,0; ...
                  40,   2.5,7.5,0,    225,0,0; ...
                  40.3, 2.5,7.45,0,  270,0,0; ...
                  
                   %7.9, 0.1,-1.5,0,  180,0,0; ...
                  46.25,   2.5,0,0,    225,0,0; ...
                   %8.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  52.2, 2.5,-7.45,0,  0,0,0; ...
                  52.5,   2.5,-7.5,0,    45,0,0; ...
                  52.8, 2.45,-7.5,0  90,0,0; ...
 
                   %9.9, -1.5,-0.1,0,  0,0,0; ...
                   58.75,   0,-7.5,0,    45,0,0; ...
                   %10.1, -1.5,0.1,0  90,0,0; ...
                  
                  64.7, -2.45,-7.5,0,  90,0,0; ...
                  65,   -2.5,-7.5,0,    135,0,0; ...
                  65.3, -2.5,-7.45,0,  180,0,0; ...
 
                   %11, -0.1,1.5,0,  90,0,0; ...
                   71.25,   -2.5,0,0,    135,0,0; ...
                   %12.1, 0.1,1.5,0,  180,0,0; ...
                  
                  77.2, -2.5,7.45,0,  180,0,0; ...
                  77.5,   -2.5,7.5,0,    225,0,0; ...
                  77.8, -2.45,7.5,0,  270,0,0; ...
 
                   %13.9, 1.5,0.1,0,  180,0,0; ...
                   83.75,   0,7.5,0,    225,0,0; ...
                   %14.1, 1.5,-0.1,0,  270,0,0; ...
                  
                  89.7, 2.45,7.5,0,  180,0,0; ...
                  90,   2.5,7.5,0,    225,0,0; ...
                  90.3, 2.5,7.45,0,  270,0,0; ...
                  
                   %15.9, 0.1,-1.5,0,  180,0,0; ...
                   96.25,   2.5,0,0,    225,0,0; ...
                   %16.1, -0.1,-1.5,0,  270,0,0; ...
                  
                  102.2, 2.5,-7.45,0,  270,0,0; ...
                  102.5,   2.5,-7.5,0,    270,0,0]; % Final position
              
                             % Time, Waypoint, Orientation
trajectoryInfo5 = [
                  0, 0,-2.5,0,  0,0,0; ...
                  0.3,   0,-3,0,    45,0,0]; % Final position
                      
trajectory1 = waypointTrajectory(trajectoryInfo1(:,2:4), ...
    'TimeOfArrival',trajectoryInfo1(:,1), ...
    'SampleRate',100);
trajectory2 = waypointTrajectory(trajectoryInfo2(:,2:4), ...
    'TimeOfArrival',trajectoryInfo2(:,1), ...
    'SampleRate',100);

trajectory3 = waypointTrajectory(trajectoryInfo3(:,2:4), ...
    'TimeOfArrival',trajectoryInfo3(:,1), ...
    'SampleRate',100);

trajectory4 = waypointTrajectory(trajectoryInfo4(:,2:4), ...
    'TimeOfArrival',trajectoryInfo4(:,1), ...
    'SampleRate',100);

trajectory5 = waypointTrajectory(trajectoryInfo5(:,2:4), ...
    'TimeOfArrival',trajectoryInfo5(:,1), ...
    'SampleRate',100);

truePosition1 = zeros(trajectory1.SampleRate*trajectory1.TimeOfArrival(end)-1,3); 
truePosition2 = zeros(trajectory2.SampleRate*trajectory2.TimeOfArrival(end)-1,3);
truePosition3 = zeros(trajectory3.SampleRate*trajectory3.TimeOfArrival(end)-1,3); 
truePosition4 = zeros(trajectory4.SampleRate*trajectory4.TimeOfArrival(end)-1,3); 
truePosition5 = zeros(trajectory5.SampleRate*trajectory5.TimeOfArrival(end)-1,3); 

c = 1;

while ~isDone(trajectory1)
   truePosition1(c,:) = trajectory1();
   
    fprintf(fileID1,'%.2f %.2f \n',round(truePosition1(c,1),2), round(truePosition1(c,2),2));
  
    c = c + 1;

end

c = 1;

while ~isDone(trajectory2)
   truePosition2(c,:) = trajectory2();
   
    fprintf(fileID2,'%.2f %.2f \n',round(truePosition2(c,1),2), round(truePosition2(c,2),2));
   
    c = c + 1;

end

c = 1;

while ~isDone(trajectory3)
   truePosition3(c,:) = trajectory3();
   
    fprintf(fileID3,'%.2f %.2f \n',round(truePosition3(c,1),2), round(truePosition3(c,2),2));
    
   
    c = c + 1;

end

c = 1;

while ~isDone(trajectory4)
   truePosition4(c,:) = trajectory4();
   
    fprintf(fileID4,'%.2f %.2f \n',round(truePosition4(c,1),2), round(truePosition4(c,2),2));
    
   
    c = c + 1;

end

c = 1;

while ~isDone(trajectory5)
   truePosition5(c,:) = trajectory5();
   
    fprintf(fileID5,'%.2f %.2f \n',round(truePosition5(c,1),2), round(truePosition5(c,2),2));
    
   
    c = c + 1;

end
t=1:1125;
Datax=[t.' transpose(truePosition1(:,1)).'];
Datay=[t.' transpose(truePosition1(:,1)).'];

subplot(1,2,1) 
plot(truePosition2(:,2), truePosition2(:,1), 'b*','DisplayName','Trajectory')
xlim([-6 6])
ylim([-6 6])
xlabel('X position [m]')
ylabel('Y position [m]')
title("Trajectory agent 1")
lgd = legend;
lgd.NumColumns = 1;

subplot(1,2,2) 
plot(truePosition1(:,1), truePosition1(:,2), 'b*','DisplayName','Trajectory')

lgd = legend;
lgd.NumColumns = 1;

xlim([-2.5 2.5])
ylim([-2.5 2.5])
xlabel('X position [m]')
ylabel('Y position [m]')
title("Trajectory agent 2")

sgtitle('Trajectory agents Case Study 1') 


%figure(1)
%plot(truePosition1(:,1),truePosition1(:,2),'b*')
%title('Position')
%axis([-2,2,-2,2])
%axis square
%%xlabel('X')
%ylabel('Y')
%grid on
%hold on


%figure(2)
%plot(truePosition2(:,1),truePosition2(:,2),'b*')
%title('Position')
%axis([-2,2,-2,2])
%axis square
%xlabel('X')
%ylabel('Y')
%grid on
%hold on
